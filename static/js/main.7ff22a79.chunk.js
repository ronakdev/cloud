(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(86)},28:function(e,t,a){},30:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(18),o=a.n(l),c=(a(28),a(5)),s=a(6),r=a(9),d=a(7),u=a(8),m=(a(30),a(3)),p=a(13),f=(a(39),a(87),{apiKey:"AIzaSyAC7mgfB8JG7pLuc787Fg8sEWl_NvuJgp0",authDomain:"shah-cloud-services.firebaseapp.com",databaseURL:"https://shah-cloud-services.firebaseio.com",projectId:"shah-cloud-services",storageBucket:"shah-cloud-services.appspot.com",messagingSenderId:"511211791983"});p.initializeApp(f),p.firestore().settings({timestampsInSnapshots:!0});var h=p.firestore(),v=p.storage(),g=(p.firestore.FieldValue.serverTimestamp(),a(22));var b=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};a(84);var E=function(e,t){t||(t=3e3);var a=document.createElement("div");a.innerHTML=e,a.id="snackbar",a.className="show",document.body.appendChild(a),setTimeout(function(){a.className=a.className.replace("show","")},t)},j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).uploadFile=a.uploadFile.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"uploadFile",value:function(){if(document.getElementById("file-input").files[0]){var e=document.getElementById("file-input").files[0],t=b(),a="".concat(t,"<==>").concat(e.name),n=v.ref(a),i=!1;e||(E("You need to specify a file!",4e3),i=!0),i||(E("Uploading File",2e3),n.put(e).then(function(e){console.log(e);var t="gs://".concat(e.metadata.bucket,"/").concat(e.metadata.fullPath);n.getDownloadURL().then(function(e){h.collection("files").add({uploadDate:new Date,fileName:a,storageURI:t,downloadURL:e}).then(function(e){console.log(e),h.collection("files").doc(e.id).set({id:e.id},{merge:!0})})}),E("File Uploaded")}))}else E("You need to upload a file first!")}},{key:"render",value:function(){return i.a.createElement("div",{className:"section"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col s8"},i.a.createElement("input",{type:"file",id:"file-input",className:"dropify","data-height":"300"})),i.a.createElement("div",{className:"input-field col s4"},i.a.createElement(g.Button,{waves:"light",node:"a",onClick:this.uploadFile,icon:"file_upload"}," Upload File "))))}},{key:"componentDidMount",value:function(){}}]),t}(i.a.Component),y=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("header",null,i.a.createElement("nav",{className:"top-nav"},i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"nav-wrapper"},i.a.createElement("a",{className:"brand-logo",href:"/"},"Shah Cloud Services")),i.a.createElement("a",{href:"#","data-activates":"mobile-demo",className:"button-collapse"},i.a.createElement("i",{className:"material-icons"},"menu")),i.a.createElement("ul",{className:"right hide-on-med-and-down valign-wrapper"},i.a.createElement("li",null,i.a.createElement("a",{href:"https://github.com/ronakdev/cloud"},"Github"))),i.a.createElement("ul",{className:"side-nav",id:"mobile-demo"},i.a.createElement("li",null,i.a.createElement("a",{href:"https://github.com/ronakdev/cloud"},"Github")))))))}}]),t}(i.a.Component);var w=function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).getFileType=a.getFileType.bind(Object(m.a)(Object(m.a)(a))),a.getFileIcon=a.getFileIcon.bind(Object(m.a)(Object(m.a)(a))),a.deleteFile=a.deleteFile.bind(Object(m.a)(Object(m.a)(a))),a.setIcon=a.setIcon.bind(Object(m.a)(Object(m.a)(a))),a.getIcon=a.getIcon.bind(Object(m.a)(Object(m.a)(a))),a.state={},console.log(a.props.file);var n=a.getFileType(a.props.file.fileName),i=a.getFileIcon(n),l=a.setIcon(i);return a.state={imagePreview:l},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getFileType",value:function(e){return e?e.substring(e.lastIndexOf(".")+1,e.length)||e:"unsupported"}},{key:"setIcon",value:function(e){return"image"===e?this.props.file.downloadURL:"-1"===e?"".concat("/icons","/file.png"):e}},{key:"getIcon",value:function(e){return"image"===e?this.props.file.downloadURL:"-1"===e?"".concat("/icons","/file.png"):e}},{key:"getFileIcon",value:function(e){var t=e.toLowerCase(),a="".concat("/icons","/").concat(t,".png");return"png"===t||"gif"===t||"jpg"===t||"jpeg"===t||"tiff"===t?"image":-1!==["aac","aiff","ai","avi","_blank","bmp","c","cpp","css","csv","dat","dmg","doc","dotx","dwg","dxf","eps","exe","filetypes","flv","gif","h","hpp","html","ics","iso","java","jpg","js","key","less","mid","mp3","mp4","mpg","odf","ods","odt","otp","ots","ott","_page","pdf","php","png","ppt","psd","py","qt","rar","rb","rtf","sass","scss","sql","tga","tgz","tiff","txt","wav","xls","xlsx","xml","yml","zip"].indexOf(t)?a:"-1"}},{key:"deleteFile",value:function(){var e=this;console.log(this.props),v.refFromURL(this.props.file.storageURI).delete().then(function(){h.collection("files").doc(e.props.file.id).delete(),E("Successfully Deleted!")}).catch(function(e){E("Error ".concat(e," occured"))})}},{key:"render",value:function(){var e=this,t=this.getIcon(this.getFileIcon(this.getFileType(this.props.file.fileName))),a=this.props.file.fileName.split("<==>").slice(1).join("<==>");return i.a.createElement("div",{className:"col s12 m4"},i.a.createElement("div",{className:"card"},i.a.createElement("div",{className:"card-image"},i.a.createElement("img",{src:t,alt:"file logo",width:"330",height:"330"}),i.a.createElement("span",{className:"card-title"},a)),i.a.createElement("div",{className:"card-content"},i.a.createElement("p",null,"Uploaded on ",this.props.file.uploadDate.toDate().toLocaleString().split(",")[0],".")),i.a.createElement("div",{className:"card-action"},i.a.createElement("a",{href:this.props.file.downloadURL,download:this.props.file.fileName.split("<==>").slice(1).join("<==>")},"Download"),i.a.createElement("a",{href:"#!",onClick:function(){console.log(e.props.file.fileName),function(e){document.addEventListener("copy",function t(a){a.clipboardData.setData("text/plain",e);a.preventDefault();document.removeEventListener("copy",t,!0)},!0),document.execCommand("copy")}(e.props.file.downloadURL),E("Link Copied!",4e3)}},"Copy URL"),i.a.createElement("a",{href:"#!",onClick:function(){e.deleteFile()}},"Delete"))))}}]),t}(i.a.Component),N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(r.a)(this,Object(d.a)(t).call(this))).state={files:[]},e}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.collection("files").orderBy("uploadDate","desc").limit(20).onSnapshot(function(t){var a=[];t.forEach(function(t){t.exists?(a.push(t.data()),e.setState({files:a})):E("Document does not exist")}),e.setState({files:a})})}},{key:"render",value:function(){var e=i.a.createElement("h1",null,i.a.createElement("center",null,"No files yet. Start uploading!"));return 0!==this.state.files.length&&(e=i.a.createElement("div",{className:"row"},this.state.files.map(function(e,t){return i.a.createElement(w,{file:e,key:t})}))),i.a.createElement("div",null,i.a.createElement(y,null),i.a.createElement("main",null,i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"section"},i.a.createElement("div",{className:"row"},i.a.createElement(j,null)),e))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,2,1]]]);
//# sourceMappingURL=main.7ff22a79.chunk.js.map